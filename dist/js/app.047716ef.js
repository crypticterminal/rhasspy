(function(t){function e(e){for(var s,o,i=e[0],c=e[1],l=e[2],d=0,p=[];d<i.length;d++)o=i[d],a[o]&&p.push(a[o][0]),a[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},a={app:0},r=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var s=n("c21b"),a=n.n(s);a.a},"147d":function(t,e,n){},2727:function(t,e,n){},"3c65":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var s=n("795d"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("nav",{staticClass:"navbar navbar-expand-md navbar-dark bg-dark fixed-top"},[n("div",{staticClass:"navbar-container"},[n("img",{staticClass:"navbar-brand",class:t.spinnerClass,attrs:{src:"/img/microphone.png"}}),n("a",{staticClass:"text-white font-weight-bold",attrs:{href:"/"}},[t._v("Rhasspy Voice Assistant")]),n("a",{staticClass:"badge badge-info ml-2",attrs:{href:"/api/"}},[t._v("API")])]),n("div",{staticClass:"navbar-container ml-auto"},[n("label",{staticClass:"text-white",attrs:{for:"profiles"}},[t._v("Profile:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.profile,expression:"profile"}],staticClass:"ml-2",attrs:{id:"profiles"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.profile=e.target.multiple?n:n[0]}}},[n("option",{attrs:{disabled:"",value:""}},[t._v("Select Profile")]),t._l(t.profiles,function(e){return n("option",{key:e},[t._v(t._s(e))])})],2),n("button",{staticClass:"btn btn-success ml-3",attrs:{disabled:this.training},on:{click:t.train}},[t._v("Re-Train")]),n("button",{staticClass:"btn btn-info ml-3",on:{click:t.reload}},[t._v("Reload")])])]),n("div",{staticClass:"main-container"},[t.hasAlert?n("div",{staticClass:"alert",class:t.alertClass,attrs:{role:"alert"}},[t._v("\n            "+t._s(t.alertText)+"\n        ")]):t._e(),t._m(0),n("div",{staticClass:"tab-content",attrs:{id:"myTabContent"}},[n("div",{staticClass:"tab-pane fade show active",attrs:{id:"speech",role:"tabpanel","aria-labelledby":"speech-tab"}},[n("TranscribeSpeech",{attrs:{profile:t.profile}})],1),n("div",{staticClass:"tab-pane fade",attrs:{id:"language",role:"tabpanel","aria-labelledby":"language-tab"}},[n("TrainLanguageModel",{attrs:{profile:t.profile}})],1),n("div",{staticClass:"tab-pane fade",attrs:{id:"pronounce",role:"tabpanel","aria-labelledby":"pronounce-tab"}},[n("LookupPronounce",{attrs:{profile:t.profile,unknownWords:t.unknownWords}})],1),n("div",{staticClass:"tab-pane fade",attrs:{id:"settings",role:"tabpanel","aria-labelledby":"settings-tab"}},[n("ProfileSettings",{attrs:{profile:t.profile}})],1)])])])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"nav nav-tabs",attrs:{id:"myTab",role:"tablist"}},[n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link active",attrs:{id:"speech-tab","data-toggle":"tab",href:"#speech",role:"tab","aria-controls":"speech","aria-selected":"false"}},[t._v("Speech")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{id:"language-tab","data-toggle":"tab",href:"#language",role:"tab","aria-controls":"language","aria-selected":"false"}},[t._v("Sentences")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{id:"pronounce-tab","data-toggle":"tab",href:"#pronounce",role:"tab","aria-controls":"pronounce","aria-selected":"true"}},[t._v("Words")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{id:"settings-tab","data-toggle":"tab",href:"#settings",role:"tab","aria-controls":"settings","aria-selected":"true"}},[t._v("Settings")])])])}],o=(n("55dd"),n("ac6a"),n("ffc1"),n("bc3a")),i=n.n(o),c=function(){var t={};return Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_BASE_URL&&(t.baseURL=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_BASE_URL),i.a.create(t)},l={getProfiles:function(){return c().get("/api/profiles")},getProfileSettings:function(t,e){return c().get("/api/profile",{params:{profile:t,layers:e}})},updateProfileSettings:function(t,e){return c().post("/api/profile",e,{params:{profile:t},headers:{"Content-Type":"application/json"}})}},u={update_sentences:function(t,e){return c().post("/api/sentences",e,{params:{profile:t},headers:{"Content-Type":"text/plain"}})},getSentences:function(t){return c().get("/api/sentences",{params:{profile:t}})},train:function(t){return(new c).post("/api/train","",{params:{profile:t}})},reload:function(t){return(new c).post("/api/reload","",{params:{profile:t}})}},d={lookupWord:function(t,e){return c().post("/api/lookup",e,{params:{profile:t},headers:{"Content-Type":"text/plain"}})},pronounce:function(t,e,n){return c().post("/api/pronounce",e,{params:{profile:t,type:n},headers:{"Content-Type":"text/plain"}})},download:function(t,e,n){return c().post("/api/pronounce",e,{params:{profile:t,type:n,download:!0},headers:{"Content-Type":"text/plain"},responseType:"arraybuffer"})},getPhonemeExamples:function(t){return c().get("/api/phonemes",{params:{profile:t}})},getUnknownWords:function(t){return c().get("/api/unknown_words",{params:{profile:t}})},updateCustomWords:function(t,e){return c().post("/api/custom-words",e,{params:{profile:t},headers:{"Content-Type":"text/plain"}})},getCustomWords:function(t){return c().get("/api/custom-words",{params:{profile:t}})}},p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("p",[t._v("\n        You can look up a word in the dictionary below, or have the system guess how an unknown word is pronounced.\n    ")]),n("p",[t._v("\n        New words should be added to the CMU dictionary in your profile (usually "),n("tt",[t._v("custom_words.txt")]),t._v(").\n    ")],1),n("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.lookupWord(e)}}},[n("div",{staticClass:"form-row form-group"},[t._m(0),n("div",{staticClass:"col"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.dictWord,expression:"dictWord"}],staticClass:"form-control",attrs:{id:"dict-word",type:"text"},domProps:{value:t.dictWord},on:{input:function(e){e.target.composing||(t.dictWord=e.target.value)}}})]),t._m(1),t._m(2),n("div",{staticClass:"col-xs-auto"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.phonemes,expression:"phonemes"}],staticClass:"form-control",attrs:{id:"dict-pronunciations"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.phonemes=e.target.multiple?n:n[0]}}},[n("option",{attrs:{disabled:"",value:""}},[t._v("Select Pronunciation")]),t._l(t.pronunciations,function(e){return n("option",{key:e},[t._v(t._s(e))])})],2)])]),n("div",{staticClass:"form-row form-group"},[t._m(3),n("div",{staticClass:"col"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.phonemes,expression:"phonemes"}],staticClass:"form-control",attrs:{id:"dict-phonemes",title:"Sphinx Phonemes",type:"text"},domProps:{value:t.phonemes},on:{input:function(e){e.target.composing||(t.phonemes=e.target.value)}}})]),n("div",{staticClass:"col-xs-auto"},[n("button",{staticClass:"btn btn-success",attrs:{type:"button",title:"Add to custom words"},on:{click:t.addToCustomWords}},[t._v("Add")])]),n("div",{staticClass:"col-xs-auto"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.espeakPhonemes,expression:"espeakPhonemes"}],staticClass:"form-control",attrs:{id:"espeak-phonemes",title:"eSpeak Phonemes",type:"text",readonly:""},domProps:{value:t.espeakPhonemes},on:{input:function(e){e.target.composing||(t.espeakPhonemes=e.target.value)}}})]),n("div",{staticClass:"col-xs-auto"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.pronouncePhonemes}},[t._v("Pronounce")])]),n("div",{staticClass:"col-xs-auto"},[n("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.downloadPhonemes}},[t._v("Download")])]),n("div",{staticClass:"col-xs-auto"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.pronounceType,expression:"pronounceType"}],staticClass:"form-control",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.pronounceType=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"phonemes"}},[t._v("Phonemes")]),n("option",{attrs:{value:"word"}},[t._v("Word")])])])])]),n("div",{staticClass:"row mt-5",attrs:{hidden:0==t.unknownWords.length}},[n("div",{staticClass:"col"},[n("h3",[t._v("Unknown Words")]),n("ul",t._l(t.unknownWords,function(e){return n("li",{key:e[0]},[n("a",{attrs:{href:"#"},on:{click:function(n){t.showUnknownWord(e[0],e[1])}}},[t._v(t._s(e[0]))])])}))])]),n("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.saveCustomWords(e)}}},[n("div",{staticClass:"form-group"},[t._m(4),n("div",{staticClass:"form-group"},[n("div",{staticClass:"form-row"},[n("button",{staticClass:"btn btn-primary",class:{"btn-danger":t.customWordsDirty},attrs:{type:"submit"}},[t._v("Save Custom Words")])])]),n("div",{staticClass:"form-row"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.customWords,expression:"customWords"}],staticClass:"form-control",class:{"border-danger":t.customWordsDirty},staticStyle:{"border-width":"3px"},attrs:{id:"custom-words",type:"text",rows:"10"},domProps:{value:t.customWords},on:{input:[function(e){e.target.composing||(t.customWords=e.target.value)},function(e){t.customWordsDirty=!0}]}})])]),n("div",{staticClass:"form-group"},[n("div",{staticClass:"form-row"},[n("button",{staticClass:"btn btn-primary",class:{"btn-danger":t.customWordsDirty},attrs:{type:"submit"}},[t._v("Save Custom Words")])])])]),t._m(5),n("div",{staticClass:"row mt-3"},[n("div",{staticClass:"col"},[n("table",{staticClass:"table"},[t._m(6),n("tbody",t._l(t.examples,function(e){return n("tr",{key:e[0]},[n("td",[t._v(t._s(e[0]))]),n("td",[t._v(t._s(e[1].word))]),n("td",[t._v(t._s(e[1].phonemes))])])}))])])])])},f=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-xs-auto"},[n("label",{staticClass:"col-form-label col-sm-1",attrs:{for:"dict-word"}},[t._v("Word:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-xs-auto"},[n("button",{staticClass:"btn btn-primary form-control",attrs:{type:"submit"}},[t._v("Lookup")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-xs-auto"},[n("label",{staticClass:"col-form-label col-sm-1",attrs:{for:"dict-pronunciations"}},[t._v("Pronunciations:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-xs-auto"},[n("label",{staticClass:"col-form-label col-sm-1",attrs:{for:"dict-phonemes"}},[t._v("Phonemes:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-row"},[n("label",{staticClass:"col-form-label col font-weight-bold",attrs:{for:"custom-words"}},[t._v("Custom Words:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row mt-4"},[n("div",{staticClass:"col"},[n("h3",[t._v("Phonemes")]),n("p",[t._v("\n                Sphinx uses the following "),n("b",[t._v("phonemes")]),t._v(" (units of a spoken word) to describe how a\n                word is pronounced:\n            ")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",{staticClass:"thead-light"},[n("th",{attrs:{scope:"col"}},[t._v("Phoneme")]),n("th",{attrs:{scope:"col"}},[t._v("Example")]),n("th",{attrs:{scope:"col"}},[t._v("Translation")])])}],m=(n("34ef"),{name:"LookupPronounce",props:{profile:String,unknownWords:Array},data:function(){return{dictWord:"",phonemes:"",espeakPhonemes:"",pronunciations:[],examples:[],pronounceType:"phonemes",customWords:"",customWordsDirty:!1}},methods:{lookupWord:function(){var t=this;this.$parent.beginAsync(),d.lookupWord(this.profile,this.dictWord).then(function(e){e.data.in_dictionary||t.$parent.alert('"'+t.dictWord+'" not in dictionary',"warning"),t.pronunciations=e.data.pronunciations,t.pronunciations.length>0&&(t.phonemes=t.pronunciations[0]),t.espeakPhonemes=e.data.espeak_phonemes}).catch(function(e){return t.$parent.alert(e.response.data,"danger")}).then(function(){return t.$parent.endAsync()})},showUnknownWord:function(t,e){this.dictWord=t,this.phonemes=e,this.lookupWord()},pronouncePhonemes:function(){var t=this;this.$parent.beginAsync();var e="word"==this.pronounceType?this.dictWord:this.phonemes;d.pronounce(this.profile,e,this.pronounceType).catch(function(e){return t.$parent.alert(e.response.data,"danger")}).then(function(){return t.$parent.endAsync()})},downloadPhonemes:function(){var t=this;this.$parent.beginAsync();var e="word"==this.pronounceType?this.dictWord:this.phonemes;d.download(this.profile,e,this.pronounceType).then(function(e){var n=new Uint8Array(e.data),s=window.document.createElement("a");s.href=window.URL.createObjectURL(new Blob([n],{type:"audio/wav"})),s.download=t.dictWord+".wav",document.body.appendChild(s),s.click(),document.body.removeChild(s)}).catch(function(e){return t.$parent.alert(e.response.data,"danger")}).then(function(){return t.$parent.endAsync()})},refreshExamples:function(){var t=this;d.getPhonemeExamples(this.profile).then(function(e){t.examples=Object.entries(e.data),t.examples.sort()}).catch(function(e){return t.$parent.alert(e.response.data,"danger")})},saveCustomWords:function(){var t=this;this.$parent.beginAsync(),d.updateCustomWords(this.profile,this.customWords).then(function(e){return t.$parent.alert(e.data,"success")}).catch(function(e){return t.$parent.alert(e.response.data,"danger")}).then(function(){t.$parent.endAsync(),t.customWordsDirty=!1})},getCustomWords:function(){var t=this;d.getCustomWords(this.profile).then(function(e){t.customWords=e.data}).catch(function(e){return t.$parent.alert(e.response.data,"danger")})},addToCustomWords:function(){this.dictWord.length>0&&(this.customWords+="\n"+this.dictWord+" "+this.phonemes,this.customWordsDirty=!0)}},mounted:function(){this.refreshExamples(),this.customWords=this.getCustomWords()},watch:{profile:function(){this.refreshExamples(),this.customWords=this.getCustomWords()}}}),v=m,h=(n("8c8a"),n("2877")),g=Object(h["a"])(v,p,f,!1,null,"b3c42c7c",null);g.options.__file="LookupPronounce.vue";var b=g.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.saveSentences(e)}}},[n("div",{staticClass:"form-group"},[t._m(0),t._m(1),n("div",{staticClass:"form-row text-muted pl-1"},[n("p",[t._v("Sentences shouldn't contain non-words characters like commas and periods. Rules have an "),n("tt",[t._v("=")]),t._v(" and optionally a "),n("tt",[t._v("{tag}")]),t._v(".")],1)]),n("div",{staticClass:"form-group"},[n("div",{staticClass:"form-row"},[n("button",{staticClass:"btn btn-primary",class:{"btn-danger":t.sentencesDirty},attrs:{type:"submit"}},[t._v("Save Sentences")])])]),n("div",{staticClass:"form-row"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.sentences,expression:"sentences"}],staticClass:"form-control",class:{"border-danger":t.sentencesDirty},staticStyle:{"border-width":"3px"},attrs:{id:"sentences",type:"text",rows:"25"},domProps:{value:t.sentences},on:{input:[function(e){e.target.composing||(t.sentences=e.target.value)},function(e){t.sentencesDirty=!0}]}})])]),n("div",{staticClass:"form-group"},[n("div",{staticClass:"form-row"},[n("button",{staticClass:"btn btn-primary",class:{"btn-danger":t.sentencesDirty},attrs:{type:"submit"}},[t._v("Save Sentences")])])])])])},C=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-row"},[n("label",{staticClass:"col-form-label col font-weight-bold",attrs:{for:"sentences"}},[t._v("Intent Examples:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-row text-muted pl-1"},[n("p",[t._v("Example sentences, formatted "),n("a",{attrs:{href:"https://docs.python.org/3/library/configparser.html"}},[t._v("ini style")]),t._v(", with each section (intent) containing a simplified "),n("a",{attrs:{href:"https://www.w3.org/TR/jsgf/"}},[t._v("JSGF Grammar")]),t._v(".")])])}],y={name:"TrainLangaugeModel",props:{profile:String},data:function(){return{sentences:"",sentencesDirty:!1}},methods:{saveSentences:function(){var t=this;this.$parent.beginAsync(),u.update_sentences(this.profile,this.sentences).then(function(e){return t.$parent.alert(e.data,"success")}).catch(function(e){return t.$parent.alert(e.response.data,"danger")}).then(function(){t.$parent.endAsync(),t.sentencesDirty=!1})},getSentences:function(){var t=this;u.getSentences(this.profile).then(function(e){t.sentences=e.data}).catch(function(e){return t.$parent.alert(e.response.data,"danger")})}},mounted:function(){this.sentences=this.getSentences()},watch:{profile:function(){this.sentences=this.getSentences()}}},w=y,S=(n("aa5e"),Object(h["a"])(w,_,C,!1,null,"6f3633aa",null));S.options.__file="TrainLanguageModel.vue";var x=S.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.getIntent(e)}}},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"form-row"},[t._m(0),n("div",{staticClass:"col-auto"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.device,expression:"device"}],attrs:{id:"device"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.device=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"-1"}},[t._v("Default Device")]),t._l(t.microphones,function(e,s){return n("option",{key:s,domProps:{value:s}},[t._v(t._s(s)+": "+t._s(e))])})],2)]),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn",class:{"btn-danger":t.recording,"btn-primary":!t.recording},attrs:{type:"button",disabled:t.interpreting},on:{mousedown:t.startRecording,mouseup:t.stopRecording}},[t._v(t._s(t.recording?"Release to Stop":"Hold to Record"))])])])]),n("div",{staticClass:"form-group"},[n("div",{staticClass:"form-row"},[t._m(1),n("div",{staticClass:"col"},[n("input",{ref:"wavFile",staticClass:"form-control",attrs:{id:"wavFile",type:"file"}})]),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.transcribe}},[t._v("Transcribe WAV")])])]),t._m(2)]),n("div",{staticClass:"form-group"},[n("div",{staticClass:"form-row"},[t._m(3),n("div",{staticClass:"col"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.sentence,expression:"sentence"}],staticClass:"form-control",attrs:{id:"sentence",type:"text"},domProps:{value:t.sentence},on:{input:function(e){e.target.composing||(t.sentence=e.target.value)}}})]),t._m(4)])]),n("div",{staticClass:"form-group"},[n("div",{staticClass:"form-row mt-5"},[n("div",{staticClass:"col-auto"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.sendHass,expression:"sendHass"}],attrs:{type:"checkbox",id:"sendHass"},domProps:{checked:Array.isArray(t.sendHass)?t._i(t.sendHass,null)>-1:t.sendHass},on:{change:function(e){var n=t.sendHass,s=e.target,a=!!s.checked;if(Array.isArray(n)){var r=null,o=t._i(n,r);s.checked?o<0&&(t.sendHass=n.concat([r])):o>-1&&(t.sendHass=n.slice(0,o).concat(n.slice(o+1)))}else t.sendHass=a}}}),n("label",{staticClass:"ml-1",attrs:{for:"sendHass"}},[t._v("Send to Home Assistant")])])])]),n("hr"),n("div",{staticClass:"form-group"},[n("div",{staticClass:"form-row mt-5"},[n("div",[n("tree-view",{attrs:{data:t.jsonSource,options:{rootObjectKey:"intent"},hidden:!t.jsonSource}})],1)])])])])},k=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-auto"},[n("label",{staticClass:"col-form-label col",attrs:{for:"device"}},[t._v("Audio Device")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-auto"},[n("label",{staticClass:"col-form-label col",attrs:{for:"wavFile"}},[t._v("WAV file")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-row"},[n("p",{staticClass:"text-muted mt-1"},[t._v("\n                    16-bit 16Khz mono preferred\n                ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-auto"},[n("label",{staticClass:"col-form-label col",attrs:{for:"sentence"}},[t._v("Sentence")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[t._v("Get Intent")])])}],$=(n("7f7f"),{transcribeWav:function(t,e,n){var s={profile:t};return n||(s["nohass"]=!0),c().post("/api/speech-to-intent",e,{params:s,headers:{"Content-Type":"audio/wav"}})},getIntent:function(t,e,n){var s={profile:t};return n||(s["nohass"]=!0),c().post("/api/text-to-intent",e,{params:s,headers:{"Content-Type":"text/plain"}})},startRecording:function(t,e){return c().post("/api/start-recording","",{params:{profile:t,device:e}})},stopRecording:function(t,e){var n={profile:t};return e||(n["nohass"]=!0),c().post("/api/stop-recording","",{params:n})},getMicrophones:function(t){return c().get("/api/microphones",{params:{profile:t}})}}),P={name:"TranscribeSpeech",props:{profile:String},data:function(){return{jsonSource:null,sentence:"",recording:!1,interpreting:!1,device:"-1",microphones:{},sendHass:!0}},methods:{transcribe:function(){this.sentence="";var t=new FileReader,e=this;t.onload=function(){e.$parent.beginAsync(),$.transcribeWav(e.profile,this.result,e.sendHass).then(function(t){e.$parent.alert("Got intent: "+t.data.intent.name+" in "+t.data.time_sec.toFixed(2)+" second(s)","success"),e.sentence=t.data.text,e.jsonSource=t.data}).catch(function(t){return e.$parent.alert(t.response.data,"danger")}).then(function(){return e.$parent.endAsync()})};var n=this.$refs.wavFile.files;n.length>0?t.readAsArrayBuffer(n[0]):this.$parent.alert("No WAV file","danger")},getIntent:function(){var t=this;this.$parent.beginAsync(),$.getIntent(this.profile,this.sentence,this.sendHass).then(function(e){e.data.error?t.$parent.alert(e.data.error,"danger"):t.$parent.alert("Got intent: "+e.data.intent.name+" in "+e.data.time_sec.toFixed(2)+" second(s)","success"),t.jsonSource=e.data}).catch(function(e){return t.$parent.alert(e.response.data,"danger")}).then(function(){return t.$parent.endAsync()})},startRecording:function(){var t=this;$.startRecording(this.profile,this.device).then(function(){t.recording=!0}).catch(function(e){return t.$parent.alert(e.response.data,"danger")})},stopRecording:function(){var t=this;this.interpreting=!0,this.$parent.beginAsync(),$.stopRecording(this.profile,this.sendHass).then(function(e){t.recording=!1,t.jsonSource=e.data,t.sentence=e.data.text}).catch(function(e){return t.$parent.alert(e.response.data,"danger")}).then(function(){t.recording=!1,t.interpreting=!1,t.$parent.endAsync()})}},mounted:function(){var t=this;$.getMicrophones(this.profile).then(function(e){t.microphones=e.data}).catch(function(e){return t.$parent.alert(e.response.data,"danger")})}},A=P,T=(n("eba8"),Object(h["a"])(A,W,k,!1,null,"43b9211b",null));T.options.__file="TranscribeSpeech.vue";var E=T.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.saveSettings(e)}}},[n("h2",[t._v(t._s(this.profile))]),n("div",{staticClass:"form-group"},[n("div",{staticClass:"form-row"},[n("button",{staticClass:"btn btn-primary",class:{"btn-danger":t.profileSettingsDirty},attrs:{type:"submit"}},[t._v("Save Profile")])])]),n("div",{staticClass:"form-group"},[n("div",{staticClass:"form-row"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.profileSettings,expression:"profileSettings"}],staticClass:"form-control",class:{"border-danger":t.profileSettingsDirty},staticStyle:{"border-width":"3px"},attrs:{id:"profile-settings",type:"text",rows:"15"},domProps:{value:t.profileSettings},on:{input:[function(e){e.target.composing||(t.profileSettings=e.target.value)},function(e){t.profileSettingsDirty=!0}]}})])]),n("div",{staticClass:"form-group"},[n("div",{staticClass:"form-row"},[n("button",{staticClass:"btn btn-primary",class:{"btn-danger":t.profileSettingsDirty},attrs:{type:"submit"}},[t._v("Save Profile")])])]),n("hr"),n("h2",[t._v("Defaults")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.defaultSettings,expression:"defaultSettings"}],staticClass:"form-control",attrs:{id:"default-settings",type:"text",rows:"15",readonly:""},domProps:{value:t.defaultSettings},on:{input:function(e){e.target.composing||(t.defaultSettings=e.target.value)}}})])])},j=[],O={name:"ProfileSettings",props:{profile:String},data:function(){return{profileSettings:"",profileSettingsDirty:!1,defaultSettings:""}},methods:{refreshSettings:function(){var t=this;l.getProfileSettings(this.profile,"profile").then(function(e){t.profileSettings=JSON.stringify(e.data,null,4)}).catch(function(e){return t.$parent.alert(e.response.data,"danger")})},refreshDefaults:function(){var t=this;l.getProfileSettings(this.profile,"defaults").then(function(e){t.defaultSettings=JSON.stringify(e.data,null,4)}).catch(function(e){return t.$parent.alert(e.response.data,"danger")})},saveSettings:function(){var t=this;this.$parent.beginAsync(),l.updateProfileSettings(this.profile,this.profileSettings).then(function(e){return t.$parent.alert(e.data,"success")}).catch(function(e){return t.$parent.alert(e.response.data,"danger")}).then(function(){t.$parent.endAsync(),t.profileSettingsDirty=!1})}},mounted:function(){this.refreshSettings(),this.refreshDefaults()},watch:{profile:function(){this.refreshSettings(),this.refreshDefaults()}}},R=O,N=(n("6f10"),Object(h["a"])(R,D,j,!1,null,"847f1e3c",null));N.options.__file="ProfileSettings.vue";var U=N.exports,H={name:"app",components:{LookupPronounce:b,TrainLanguageModel:x,TranscribeSpeech:E,ProfileSettings:U},data:function(){return{hasAlert:!1,alertText:"",alertClass:"alert-info",spinnerClass:"",profile:"en",profiles:[],training:!1,unknownWords:[]}},methods:{startSpinning:function(){this.spinnerClass="spinner"},stopSpinning:function(){this.spinnerClass=""},clearAlert:function(){this.hasAlert=!1,this.alertText="",this.alertClass="alert-info"},alert:function(t,e){this.hasAlert=!0,this.alertText=t,this.alertClass="alert-"+e},beginAsync:function(){this.clearAlert(),this.startSpinning()},endAsync:function(){this.stopSpinning()},getProfiles:function(){var t=this;l.getProfiles().then(function(e){t.profiles=e.data}).catch(function(e){return t.alert(e.response.data,"danger")})},train:function(){var t=this;this.beginAsync(),this.training=!0,u.train(this.profile).then(function(e){return t.alert(e.data,"success")}).catch(function(e){return t.alert(e.response.data,"danger")}).then(function(){t.training=!1,t.getUnknownWords(),t.endAsync()})},reload:function(){var t=this;u.reload(this.profile).then(function(e){return t.alert(e.data,"success")}).catch(function(e){return t.alert(e.response.data,"danger")})},getUnknownWords:function(){var t=this;d.getUnknownWords(this.profile).then(function(e){t.unknownWords=Object.entries(e.data),t.unknownWords.sort()}).catch(function(e){return t.alert(e.response.data,"danger")})}},mounted:function(){this.getProfiles(),this.getUnknownWords()},watch:{profile:function(){this.getUnknownWords()}}},L=H,M=(n("034f"),Object(h["a"])(L,a,r,!1,null,null,null));M.options.__file="App.vue";var F=M.exports,V=n("a7fe"),I=n.n(V),B=n("ffde"),G=n.n(B);s["a"].use(I.a,i.a),s["a"].use(G.a),s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(F)}}).$mount("#app")},"6f10":function(t,e,n){"use strict";var s=n("2727"),a=n.n(s);a.a},"8c8a":function(t,e,n){"use strict";var s=n("c48d"),a=n.n(s);a.a},aa5e:function(t,e,n){"use strict";var s=n("147d"),a=n.n(s);a.a},c21b:function(t,e,n){},c48d:function(t,e,n){},eba8:function(t,e,n){"use strict";var s=n("3c65"),a=n.n(s);a.a}});
//# sourceMappingURL=app.047716ef.js.map